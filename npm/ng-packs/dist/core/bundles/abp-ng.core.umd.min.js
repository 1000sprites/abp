!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/router"),require("@ngxs/store"),require("rxjs"),require("snq"),require("@angular/common/http"),require("rxjs/operators"),require("@angular/common"),require("just-compare"),require("just-clone"),require("@angular/forms"),require("angular-oauth2-oidc"),require("@ngxs/router-plugin"),require("@ngxs/storage-plugin"),require("@ngx-validate/core")):"function"==typeof define&&define.amd?define("@abp/ng.core",["exports","@angular/core","@angular/router","@ngxs/store","rxjs","snq","@angular/common/http","rxjs/operators","@angular/common","just-compare","just-clone","@angular/forms","angular-oauth2-oidc","@ngxs/router-plugin","@ngxs/storage-plugin","@ngx-validate/core"],e):e(((t=t||self).abp=t.abp||{},t.abp.ng=t.abp.ng||{},t.abp.ng.core={}),t.ng.core,t.ng.router,t.store,t.rxjs,t.snq,t.ng.common.http,t.rxjs.operators,t.ng.common,t.compare,t.clone,t.ng.forms,t.angularOauth2Oidc,t.routerPlugin,t.storagePlugin,t.core$1)}(this,function(t,e,n,r,o,i,a,u,c,s,p,l,f,d,h,y){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i,s=s&&s.hasOwnProperty("default")?s.default:s,p=p&&p.hasOwnProperty("default")?p.default:p;var g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function m(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function b(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function S(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function R(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function I(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(R(arguments[e]));return t}var O=function(){function t(t,e){this.name=t,this.newValue=e}return t.type="[Config] Patch Route By Name",t}();var w=function(){function t(){}return t.type="[Config] Get App Configuration",t}();var j=function(){function t(t){this.payload=t}return t.type="[Loader] Start",t}();var E=function(){function t(t){this.payload=t}return t.type="[Loader] Stop",t}();var P=function(){function t(){}return t.type="[Profile] Get",t}();var A=function(){function t(t){this.payload=t}return t.type="[Profile] Update",t}();var C=function(){function t(t){this.payload=t}return t.type="[Profile] Change Password",t}();var D=function(){function t(t){this.payload=t}return t.type="[Rest] Error",t}();var L=function(){function t(t){this.payload=t}return t.type="[Session] Set Language",t}();var x=function(){function t(t){this.payload=t}return t.type="[Session] Set Tenant",t}();var k=function(){function t(t){this.rest=t}return t.prototype.get=function(){return this.rest.request({method:"GET",url:"/api/identity/my-profile"})},t.prototype.update=function(t){var e={method:"PUT",url:"/api/identity/my-profile",body:t};return this.rest.request(e)},t.prototype.changePassword=function(t,e){void 0===e&&(e=!1);var n={method:"POST",url:"/api/identity/my-profile/change-password",body:t};return this.rest.request(n,{skipHandleError:e})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:G}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(G))},token:t,providedIn:"root"}),t}();var F=function(){function t(t){this.profileService=t}return t.getProfile=function(t){return t.profile},t.prototype.profileGet=function(t){var e=t.patchState;return this.profileService.get().pipe(u.tap(function(t){return e({profile:t})}))},t.prototype.profileUpdate=function(t,e){var n=t.patchState,r=e.payload;return this.profileService.update(r).pipe(u.tap(function(t){return n({profile:t})}))},t.prototype.changePassword=function(t,e){var n=e.payload;return this.profileService.changePassword(n,!0)},m([r.Action(P),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",void 0)],t.prototype,"profileGet",null),m([r.Action(A),b("design:type",Function),b("design:paramtypes",[Object,A]),b("design:returntype",void 0)],t.prototype,"profileUpdate",null),m([r.Action(C),b("design:type",Function),b("design:paramtypes",[Object,C]),b("design:returntype",void 0)],t.prototype,"changePassword",null),m([r.Selector(),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",Object)],t,"getProfile",null),t=m([r.State({name:"ProfileState",defaults:{}}),b("design:paramtypes",[k])],t)}();var N={"ar-sa":"ar-SA","ca-ES-valencia":"ca-ES-VALENCIA","de-de":"de","es-ES":"es","en-US":"en","fil-Latn":"en","ku-Arab":"en","ky-Cyrl":"en","mi-Latn":"en","prs-Arab":"en","qut-Latn":"en",nso:"en",quz:"en","fr-FR":"fr","gd-Latn":"gd","ha-Latn":"ha","ig-Latn":"ig","it-it":"it","mn-Cyrl":"mn","pt-BR":"pt","sd-Arab":"pa-Arab","sr-Cyrl-RS":"sr-Cyrl","sr-Latn-RS":"sr-Latn","tg-Cyrl":"tg","tk-Latn":"tk","tt-Cyrl":"tt","ug-Arab":"ug","yo-Latn":"yo"};function T(t){return function(){return t.get(r.Store).dispatch(new w).toPromise()}}function q(t){return function(){var e=t.get(r.Store).selectSnapshot(B.getLanguage)||"en";return new Promise(function(t,n){_(e).then(function(){return t()},n)})}}function _(t){return import("@angular/common/locales/"+(N[t]||t)+".js").then(function(t){c.registerLocaleData(t.default)})}var V=function(){function t(t,e,n,r){if(this.store=t,this.router=e,this.actions=n,r)throw new Error("LocaleService should have only one instance.")}return Object.defineProperty(t.prototype,"currentLang",{get:function(){return this.store.selectSnapshot(B.getLanguage)},enumerable:!0,configurable:!0}),t.prototype.setRouteReuse=function(t){this.router.routeReuseStrategy.shouldReuseRoute=t},t.prototype.registerLocale=function(t){var e=this,n=this.router.routeReuseStrategy.shouldReuseRoute;return this.setRouteReuse(function(){return!1}),this.router.navigated=!1,_(t).then(function(){return t=e,r=void 0,a=function(){return S(this,function(t){switch(t.label){case 0:return[4,this.router.navigateByUrl(this.router.url).catch(o.noop)];case 1:return t.sent(),this.setRouteReuse(n),[2]}})},new((i=void 0)||(i=Promise))(function(e,n){function o(t){try{c(a.next(t))}catch(t){n(t)}}function u(t){try{c(a.throw(t))}catch(t){n(t)}}function c(t){t.done?e(t.value):new i(function(e){e(t.value)}).then(o,u)}c((a=a.apply(t,r||[])).next())});var t,r,i,a})},t.prototype.get=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.store.select($.getCopy.apply($,I([t],e)))},t.prototype.instant=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.store.selectSnapshot($.getCopy.apply($,I([t],e)))},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r.Store},{type:n.Router},{type:r.Actions},{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(r.Store),e.ɵɵinject(n.Router),e.ɵɵinject(r.Actions),e.ɵɵinject(t,12))},token:t,providedIn:"root"}),t}();var B=function(){function t(t){this.localizationService=t}return t.getLanguage=function(t){return t.language},t.getTenant=function(t){return t.tenant},t.prototype.setLanguage=function(t,e){var n=t.patchState,r=t.dispatch,i=e.payload;return n({language:i}),o.combineLatest([r(new w),o.from(this.localizationService.registerLocale(i))])},t.prototype.setTenantId=function(t,e){(0,t.patchState)({tenant:e.payload})},m([r.Action(L),b("design:type",Function),b("design:paramtypes",[Object,L]),b("design:returntype",void 0)],t.prototype,"setLanguage",null),m([r.Action(x),b("design:type",Function),b("design:paramtypes",[Object,x]),b("design:returntype",void 0)],t.prototype,"setTenantId",null),m([r.Selector(),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",String)],t,"getLanguage",null),m([r.Selector(),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",Object)],t,"getTenant",null),t=m([r.State({name:"SessionState",defaults:{}}),b("design:paramtypes",[V])],t)}();var G=function(){function t(t,e){this.http=t,this.store=e}return t.prototype.handleError=function(t){return this.store.dispatch(new D(t)),console.error(t),o.throwError(t)},t.prototype.request=function(t,e,n){var r=this;void 0===e&&(e={});var i=e.observe,a=void 0===i?"body":i,c=e.skipHandleError,s=n||this.store.selectSnapshot($.getApiUrl())+t.url,p=t.method,l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["method"]);return this.http.request(p,s,v({observe:a},l)).pipe("body"===a?u.take(1):null,u.catchError(function(t){return c?o.throwError(t):r.handleError(t)}))},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:a.HttpClient},{type:r.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(a.HttpClient),e.ɵɵinject(r.Store))},token:t,providedIn:"root"}),t}();var U=function(){function t(t){this.rest=t}return t.prototype.getConfiguration=function(){return this.rest.request({method:"GET",url:"/api/abp/application-configuration"})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:G}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(G))},token:t,providedIn:"root"}),t}();function M(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null);var o=function(t){return t.children&&t.children.length&&(t.children=M(t.children,e,n,t.name)),!t.parentName||t.parentName===r||(n.push(t),!1)};if(r)return t.filter(o);var i=t.filter(o);return n.length?H(z(I(i,e),n)):i}function z(t,e){return t.map(function(t){t.children&&t.children.length&&(t.children=z(t.children,e));var n=e.filter(function(e){return e.parentName===t.name});return n&&n.length&&(t.children=I(t.children||[],n)),t})}function H(t){return void 0===t&&(t=[]),t.length?t.sort(function(t,e){return t.order-e.order}).map(function(t){return t.children&&t.children.length&&(t.children=H(t.children)),t}):[]}var $=function(){function t(t,e){this.appConfigurationService=t,this.store=e}var e;return e=t,t.getAll=function(t){return t},t.getApplicationInfo=function(t){return t.environment.application||{}},t.getOne=function(t){return r.createSelector([e],function(e){return e[t]})},t.getDeep=function(t){if("string"==typeof t&&(t=t.split(".")),!Array.isArray(t))throw new Error("The argument must be a dot string or an string array.");return r.createSelector([e],function(e){return t.reduce(function(t,e){if(t)return t[e]},e)})},t.getRoute=function(t,n){return r.createSelector([e],function(e){return e.flattedRoutes.find(function(e){return t&&e.path===t?e:n&&e.name===n?e:void 0})})},t.getApiUrl=function(t){return r.createSelector([e],function(e){return e.environment.apis[t||"default"].url})},t.getSetting=function(t){return r.createSelector([e],function(e){return i(function(){return e.setting.values[t]})})},t.getGrantedPolicy=function(t){return r.createSelector([e],function(e){return!t||i(function(){return e.auth.grantedPolicies[t]},!1)})},t.getCopy=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];t||(t="");var a=t.split("::"),u=r.createSelector([e],function(e){if(!e.localization)return t;var r=e.environment.localization.defaultResourceName;if(""===a[0]){if(!r)throw new Error("Please check your environment. May you forget set defaultResourceName? \n              Here is the example:\n               { production: false,\n                 localization: {\n                   defaultResourceName: 'MyProjectName'\n                  }\n               }");a[0]=i(function(){return r})}var o=a.reduce(function(t,e){if(t)return t[e]},e.localization.values);return n=n.filter(function(t){return null!=t}),o&&n&&n.length&&n.forEach(function(t){o=o.replace(/[\'\"]?\{[\d]+\}[\'\"]?/,t)}),o||t});return u},t.prototype.addData=function(t){var e=this,n=t.patchState,r=t.dispatch;return this.appConfigurationService.getConfiguration().pipe(u.tap(function(t){return n(v({},t))}),u.switchMap(function(t){var n=t.setting.values["Abp.Localization.DefaultLanguage"];return n.includes(";")&&(n=n.split(";")[0]),e.store.selectSnapshot(B.getLanguage)?o.of(null):r(new L(n))}))},t.prototype.patchRoute=function(t,e){var n=t.patchState,r=t.getState,o=e.name,i=e.newValue,a=r().routes;a.findIndex(function(t){return t.name===o});return n({routes:a=function t(e,n,r,o){void 0===o&&(o=null);e=e.map(function(e){return e.name===n?(r.path&&(r.url=o+"/"+r.path),r.children&&r.children.length&&(r.children=r.children.map(function(t){return v({},t,{url:o+"/"+e.path+"/"+t.path})})),v({},e,r)):(e.children&&e.children.length&&(e.children=t(e.children,n,r,(o||"/")+e.path)),e)});if(o)return e;return M(e)}(a,o,i)})},m([r.Action(w),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",void 0)],t.prototype,"addData",null),m([r.Action(O),b("design:type",Function),b("design:paramtypes",[Object,O]),b("design:returntype",void 0)],t.prototype,"patchRoute",null),m([r.Selector(),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",void 0)],t,"getAll",null),m([r.Selector(),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",void 0)],t,"getApplicationInfo",null),t=e=m([r.State({name:"ConfigState",defaults:{}}),b("design:paramtypes",[U,r.Store])],t)}();function X(t){return"function"==typeof t}var W=function(t,e){return void 0===e&&(e="ngOnDestroy"),function(n){var r=t[e];if(!1===X(r))throw new Error(t.constructor.name+" is using untilDestroyed but doesn't implement "+e);return t.__takeUntilDestroy||(t.__takeUntilDestroy=new o.Subject,t[e]=function(){X(r)&&r.apply(this,arguments),t.__takeUntilDestroy.next(!0),t.__takeUntilDestroy.complete()}),n.pipe(u.takeUntil(t.__takeUntilDestroy))}},Z=function(){function t(t,e,r){var o=this;this.router=t,this.route=e,this.store=r;var a=this.store.selectSnapshot($.getAll),u=a.requirements.layouts,c=a.routes;(this.route.snapshot.data||{}).layout&&(this.layout=u.filter(function(t){return!!t}).find(function(t){return i(function(){return t.type.toLowerCase().indexOf(o.route.snapshot.data.layout)},-1)>-1})),this.router.events.pipe(W(this)).subscribe(function(t){if(t instanceof n.NavigationEnd){var e=o.router.parseUrl(t.url).root.children.primary.segments,r=(o.route.snapshot.data||{}).layout||function(t,e){var n="empty",r=e.reduce(function(t,e){return e.wrapper?I(t,e.children):I(t,[e])},[]).find(function(e){return e.path===t[0].path});if(r&&(r.layout&&(n=r.layout),r.children&&r.children.length&&t.length>1)){var o=r.children.find(function(e){return e.path===t[1].path});o&&o.layout&&(n=o.layout)}return n}(e,c);o.layout=u.filter(function(t){return!!t}).find(function(t){return i(function(){return t.type.toLowerCase().indexOf(r)},-1)>-1})}})}return t.prototype.ngOnDestroy=function(){},t.decorators=[{type:e.Component,args:[{selector:"abp-dynamic-layout",template:'\n    <ng-container *ngTemplateOutlet="layout ? componentOutlet : routerOutlet"></ng-container>\n\n    <ng-template #routerOutlet><router-outlet></router-outlet></ng-template>\n    <ng-template #componentOutlet><ng-container *ngComponentOutlet="layout"></ng-container></ng-template>\n  '}]}],t.ctorParameters=function(){return[{type:n.Router},{type:n.ActivatedRoute},{type:r.Store}]},m([r.Select($.getOne("requirements")),b("design:type",o.Observable)],t.prototype,"requirements$",void 0),t}();var Q=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"abp-router-outlet",template:"\n    <router-outlet></router-outlet>\n  "}]}],t}(),J=function(){function t(t){this.elRef=t,this.delay=0}return t.prototype.ngAfterViewInit=function(){var t=this;setTimeout(function(){return t.elRef.nativeElement.focus()},this.delay)},t.decorators=[{type:e.Directive,args:[{selector:"[autofocus]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={delay:[{type:e.Input,args:["autofocus"]}]},t}();var K=function(){function t(t,e){this.cdRef=t,this.elRef=e,this.enabled=!0}return Object.defineProperty(t.prototype,"inlineClass",{get:function(){return this.enabled&&this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"class",{get:function(){return this.enabled&&!this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this.enabled&&this.width?this.width||"170px":void 0},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;setTimeout(function(){var e=t.title;t.title=e||t.elRef.nativeElement.innerText,t.title!==e&&t.cdRef.detectChanges()},0)},t.decorators=[{type:e.Directive,args:[{selector:"[abpEllipsis]"}]}],t.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:e.ElementRef}]},t.propDecorators={width:[{type:e.Input,args:["abpEllipsis"]}],title:[{type:e.HostBinding,args:["title"]},{type:e.Input}],enabled:[{type:e.Input,args:["abpEllipsisEnabled"]}],inlineClass:[{type:e.HostBinding,args:["class.abp-ellipsis-inline"]}],class:[{type:e.HostBinding,args:["class.abp-ellipsis"]}],maxWidth:[{type:e.HostBinding,args:["style.max-width"]}]},t}();var Y=function(t,e,n,r){this.$implicit=t,this.index=e,this.count=n,this.list=r};var tt=function(t,e){this.record=t,this.view=e};var et=function(){function t(t,e,n){this.tempRef=t,this.vcRef=e,this.differs=n}return Object.defineProperty(t.prototype,"compareFn",{get:function(){return this.compareBy||s},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackByFn",{get:function(){return this.trackBy||function(t,e){return e.id||t}},enumerable:!0,configurable:!0}),t.prototype.iterateOverAppliedOperations=function(t){var e=this,n=[];t.forEachOperation(function(t,r,o){if(null==t.previousIndex){var i=e.vcRef.createEmbeddedView(e.tempRef,new Y(null,-1,-1,e.items),o);n.push(new tt(t,i))}else if(null==o)e.vcRef.remove(r);else{i=e.vcRef.get(r);e.vcRef.move(i,o),n.push(new tt(t,i))}});for(var r=0,o=n.length;r<o;r++)n[r].view.context.$implicit=n[r].record.item},t.prototype.iterateOverAttachedViews=function(t){for(var e=this,n=0,r=this.vcRef.length;n<r;n++){var o=this.vcRef.get(n);o.context.index=n,o.context.count=r,o.context.list=this.items}t.forEachIdentityChange(function(t){e.vcRef.get(t.currentIndex).context.$implicit=t.item})},t.prototype.projectItems=function(t){if(!t.length&&this.emptyRef)return this.vcRef.createEmbeddedView(this.emptyRef).rootNodes,void(this.isShowEmptyRef=!0);if(this.emptyRef&&this.isShowEmptyRef&&(this.vcRef.clear(),this.isShowEmptyRef=!1),!this.differ&&t&&(this.differ=this.differs.find(t).create(this.trackByFn)),this.differ){var e=this.differ.diff(t);e&&(this.iterateOverAppliedOperations(e),this.iterateOverAttachedViews(e))}},t.prototype.sortItems=function(t){var e=this;this.orderBy?t.sort(function(t,n){return t[e.orderBy]>n[e.orderBy]?1:t[e.orderBy]<n[e.orderBy]?-1:0}):t.sort()},t.prototype.ngOnChanges=function(){var t=this,e=p(this.items);if(Array.isArray(e)){var n=this.compareFn;switch(void 0!==this.filterBy&&(e=e.filter(function(e){return n(e[t.filterBy],t.filterVal)})),this.orderDir){case"ASC":this.sortItems(e),this.projectItems(e);break;case"DESC":this.sortItems(e),e.reverse(),this.projectItems(e);break;default:this.projectItems(e)}}},t.decorators=[{type:e.Directive,args:[{selector:"[abpFor]"}]}],t.ctorParameters=function(){return[{type:e.TemplateRef},{type:e.ViewContainerRef},{type:e.IterableDiffers}]},t.propDecorators={items:[{type:e.Input,args:["abpForOf"]}],orderBy:[{type:e.Input,args:["abpForOrderBy"]}],orderDir:[{type:e.Input,args:["abpForOrderDir"]}],filterBy:[{type:e.Input,args:["abpForFilterBy"]}],filterVal:[{type:e.Input,args:["abpForFilterVal"]}],trackBy:[{type:e.Input,args:["abpForTrackBy"]}],compareBy:[{type:e.Input,args:["abpForCompareBy"]}],emptyRef:[{type:e.Input,args:["abpForEmptyRef"]}]},t}();function nt(t){return t?(t^16*Math.random()>>t/4).toString(16):(""+1e7+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,nt)}var rt=function(){function t(t,n,r){this.formGroupDirective=t,this.host=n,this.cdRef=r,this.ngSubmit=new e.EventEmitter,this.executedNgSubmit=!1}return t.prototype.ngOnInit=function(){var t=this;this.formGroupDirective.ngSubmit.pipe(W(this)).subscribe(function(){t.markAsDirty(),t.executedNgSubmit=!0}),o.fromEvent(this.host.nativeElement,"keyup").pipe(u.debounceTime(200),u.filter(function(t){return t&&"Enter"===t.key}),W(this)).subscribe(function(){t.executedNgSubmit||t.host.nativeElement.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})),t.executedNgSubmit=!1}),o.fromEvent(this.host.nativeElement,"submit").pipe(W(this),u.filter(function(){return!t.notValidateOnSubmit&&"string"!=typeof t.notValidateOnSubmit})).subscribe(function(){t.executedNgSubmit||t.markAsDirty()})},t.prototype.ngOnDestroy=function(){},t.prototype.markAsDirty=function(){var t=this.formGroupDirective.form;!function t(e){if(Array.isArray(e))return void e.forEach(function(e){t(e.controls)});Object.keys(e).forEach(function(t){e[t].markAsDirty(),e[t].updateValueAndValidity()})}(t.controls),t.markAsDirty(),this.cdRef.detectChanges()},t.decorators=[{type:e.Directive,args:[{selector:"form[ngSubmit][formGroup]"}]}],t.ctorParameters=function(){return[{type:l.FormGroupDirective,decorators:[{type:e.Self}]},{type:e.ElementRef},{type:e.ChangeDetectorRef}]},t.propDecorators={notValidateOnSubmit:[{type:e.Input}],ngSubmit:[{type:e.Output}]},t}();var ot=function(){function t(t,e,n){this.elRef=t,this.renderer=e,this.store=n}return t.prototype.ngOnInit=function(){var t=this;this.condition&&this.store.select($.getGrantedPolicy(this.condition)).pipe(W(this)).subscribe(function(e){e||t.renderer.removeChild(t.elRef.nativeElement.parentElement,t.elRef.nativeElement)})},t.prototype.ngOnDestroy=function(){},t.decorators=[{type:e.Directive,args:[{selector:"[abpPermission]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef,decorators:[{type:e.Optional}]},{type:e.Renderer2},{type:r.Store}]},t.propDecorators={condition:[{type:e.Input,args:["abpPermission"]}]},t}();var it=function(){function t(t,e){this.elRef=t,this.renderer=e,this.completed$=new o.Subject}return t.prototype.ngAfterViewInit=function(){var t=this,e=new MutationObserver(function(e){e.forEach(function(e){e.target&&(i(function(){return Array.from(e.target.childNodes).filter(function(t){return t instanceof HTMLElement})},[]).length?setTimeout(function(){t.disconnect()},0):(t.renderer.removeChild(t.elRef.nativeElement.parentElement,t.elRef.nativeElement),t.disconnect()))})});e.observe(this.focusedElement,{childList:!0}),this.completed$.subscribe(function(){return e.disconnect()})},t.prototype.disconnect=function(){this.completed$.next(),this.completed$.complete()},t.decorators=[{type:e.Directive,args:[{selector:"[abpVisibility]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef,decorators:[{type:e.Optional}]},{type:e.Renderer2}]},t.propDecorators={focusedElement:[{type:e.Input,args:["abpVisibility"]}]},t}();var at=function(){function t(t,e){this.oauthService=t,this.store=e}return t.prototype.canActivate=function(t,e){var n=this.oauthService.hasValidAccessToken();return n||(this.store.dispatch(new d.Navigate(["/account/login"],null,{state:{redirectUrl:e.url}})),!1)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:f.OAuthService},{type:r.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(f.OAuthService),e.ɵɵinject(r.Store))},token:t,providedIn:"root"}),t}();var ut=function(){function t(t){this.store=t}return t.prototype.canActivate=function(t){var e=this,n=t.data.requiredPolicy;return this.store.select($.getGrantedPolicy(n)).pipe(u.tap(function(t){t||e.store.dispatch(new D({status:403}))}))},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(r.Store))},token:t,providedIn:"root"}),t}();var ct,st,pt,lt,ft,dt=function(){function t(t,e){this.oAuthService=t,this.store=e}return t.prototype.intercept=function(t,e){var n=this;this.store.dispatch(new j(t));var r={},o=this.oAuthService.getAccessToken();!t.headers.has("Authorization")&&o&&(r.Authorization="Bearer "+o);var i=this.store.selectSnapshot(B.getLanguage);!t.headers.has("Accept-Language")&&i&&(r["Accept-Language"]=i);var a=this.store.selectSnapshot(B.getTenant);return!t.headers.has("__tenant")&&a&&(r.__tenant=a.id),e.handle(t.clone({setHeaders:r})).pipe(u.finalize(function(){return n.store.dispatch(new E(t))}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:f.OAuthService},{type:r.Store}]},t}();(function(t){function e(){}function n(){}function r(){}function o(){}function i(){}function a(){}function u(){}t.Response=e,t.Localization=n,t.LocalizationValue=function(){},t.Language=r,t.Auth=o,t.Policy=function(){},t.Setting=i,t.CurrentUser=a,t.Features=u})(ct||(ct={})),function(t){function e(){}function n(){}function r(){}function o(){}function i(){}function a(){}t.Root=e,t.PagedItemsResponse=n,t.PageQueryParams=r,t.Route=o,t.FullRoute=i,t.BasicItem=a}(st||(st={})),function(t){function e(){}function n(){}function r(){}t.Environment=e,t.Application=n,t.Apis=function(){},t.Requirements=r}(pt||(pt={})),function(t){function e(){}function n(){}t.Config=e,t.Request=n}(t.Rest||(t.Rest={})),function(t){function e(){}t.State=e}(lt||(lt={})),function(t){function e(){}function n(){}function r(){}t.State=e,t.Response=n,t.ChangePasswordRequest=r}(ft||(ft={}));var ht=new e.InjectionToken("NGXS_CONFIG_PLUGIN_OPTIONS"),yt=function(){function t(t,e){this.options=t,this.router=e,this.initialized=!1}return t.prototype.handle=function(t,e,n){var o=r.actionMatcher(e);if((o(r.InitState)||o(r.UpdateState))&&!this.initialized){var a=function(t,e){void 0===t&&(t=[]);void 0===e&&(e=[]);var n=t.filter(function(t){return i(function(){return t.data.routes.routes.find(function(e){return e.path===t.path})},!1)}).reduce(function(t,e){return I(t,e.data.routes.routes)},[]);e=n.filter(function(t){return t.wrapper});var r=[];return t.filter(function(t){return(t.data||{}).routes&&(t.component||t.loadChildren)}).forEach(function(t){var e=n.find(function(e){return e.path.toLowerCase()===t.path.toLowerCase()&&i(function(){return t.data.routes.routes.length},!1)}),o=r.length;e&&r.push(e),r.length===o&&r.push(v({},t.data.routes,{path:t.path,name:i(function(){return t.data.routes.name},t.path),children:t.data.routes.children||[]}))}),{routes:gt(r),wrappers:e}}(this.router.config),u=a.routes;u=M(u,a.wrappers);var c=function(t){var e=function(t){return t.reduce(function(t,n){var r=[n];if(n.children){var o=n.children;delete n.children,r=I([n],e(o))}return I(t,r)},[])};return e(t)}(p(u));t=r.setValue(t,"ConfigState",v({},t.ConfigState&&v({},t.ConfigState),this.options,{routes:u,flattedRoutes:c})),this.initialized=!0}return n(t,e)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[ht]}]},{type:n.Router}]},t}();function gt(t,e){return e?t.map(function(t){return v({},t,{url:e+"/"+t.path},t.children&&t.children.length&&{children:gt(t.children,e+"/"+t.path)})}):t.map(function(t){return v({},t,{url:"/"+t.path},t.children&&t.children.length&&{children:gt(t.children,"/"+t.path)})})}var vt=function(){function t(t){this.store=t}return t.prototype.getAll=function(){return this.store.selectSnapshot($.getAll)},t.prototype.getOne=function(t){return this.store.selectSnapshot($.getOne(t))},t.prototype.getDeep=function(t){return this.store.selectSnapshot($.getDeep(t))},t.prototype.getSetting=function(t){return this.store.selectSnapshot($.getSetting(t))},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r.Store}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(r.Store))},token:t,providedIn:"root"}),t}();var mt=function(){function t(){this.loadedLibraries={}}return t.prototype.load=function(t,e,n,r,i){var a=this;if(void 0===n&&(n=""),void 0===r&&(r="body"),void 0===i&&(i="afterend"),t||n){var u,c=t?t.slice(t.lastIndexOf("/")+1):nt();return this.loadedLibraries[c]?this.loadedLibraries[c].asObservable():(this.loadedLibraries[c]=new o.ReplaySubject,"script"===e?((u=document.createElement("script")).type="text/javascript",t&&(u.src=t),u.text=n):t?((u=document.createElement("link")).type="text/css",u.rel="stylesheet",t&&(u.href=t)):(u=document.createElement("style")).textContent=n,u.onload=function(){a.loadedLibraries[c].next(),a.loadedLibraries[c].complete()},document.querySelector(r).insertAdjacentElement(i,u),this.loadedLibraries[c].asObservable())}},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();var bt=new e.InjectionToken("ENVIRONMENT"),St=new e.InjectionToken("CONFIG"),Rt=function(){function t(t,n){this.renderer=t,this.el=n,this.debounce=300,this.debounceEvent=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;o.fromEvent(this.el.nativeElement,"input").pipe(u.debounceTime(this.debounce),y.takeUntilDestroy(this)).subscribe(function(e){t.debounceEvent.emit(e)})},t.decorators=[{type:e.Directive,args:[{selector:"[input.debounce]"}]}],t.ctorParameters=function(){return[{type:e.Renderer2},{type:e.ElementRef}]},t.propDecorators={debounce:[{type:e.Input}],debounceEvent:[{type:e.Output,args:["input.debounce"]}]},t}();var It=function(){function t(t,n){this.renderer=t,this.el=n,this.stopPropEvent=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;o.fromEvent(this.el.nativeElement,"click").pipe(y.takeUntilDestroy(this)).subscribe(function(e){e.stopPropagation(),t.stopPropEvent.emit(e)})},t.decorators=[{type:e.Directive,args:[{selector:"[click.stop]"}]}],t.ctorParameters=function(){return[{type:e.Renderer2},{type:e.ElementRef}]},t.propDecorators={stopPropEvent:[{type:e.Output,args:["click.stop"]}]},t}();var Ot=function(){function t(t){this.store=t,this.initialValue="",this.destroy$=new o.Subject}return t.prototype.transform=function(t){var e=this;void 0===t&&(t="");for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return this.initialValue!==t&&(this.initialValue=t,this.destroy$.next(),this.store.select($.getCopy.apply($,I([t],n.reduce(function(t,e){return Array.isArray(e)?I(t,e):I(t,[e])},[])))).pipe(u.takeUntil(this.destroy$),W(this),u.distinctUntilChanged()).subscribe(function(t){return e.value=t})),this.value},t.prototype.ngOnDestroy=function(){},t.decorators=[{type:e.Pipe,args:[{name:"abpLocalization",pure:!1}]}],t.ctorParameters=function(){return[{type:r.Store}]},t}();var wt=function(t){function e(e){var n=t.call(this)||this;return n.localizationService=e,n}return function(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.toString=function(){var t=this.localizationService.currentLang;return N[t]||t},e.prototype.valueOf=function(){return this.toString()},e}(String);var jt={provide:e.LOCALE_ID,useClass:wt,deps:[V]},Et=function(){function t(){}return t.forRoot=function(n){return void 0===n&&(n={}),{ngModule:t,providers:[jt,{provide:r.NGXS_PLUGINS,useClass:yt,multi:!0},{provide:ht,useValue:n},{provide:a.HTTP_INTERCEPTORS,useClass:dt,multi:!0},{provide:e.APP_INITIALIZER,multi:!0,deps:[e.Injector],useFactory:T},{provide:e.APP_INITIALIZER,multi:!0,deps:[e.Injector],useFactory:q}]}},t.decorators=[{type:e.NgModule,args:[{imports:[r.NgxsModule.forFeature([F,B,$]),h.NgxsStoragePluginModule.forRoot({key:"SessionState"}),d.NgxsRouterPluginModule.forRoot(),c.CommonModule,a.HttpClientModule,l.FormsModule,l.ReactiveFormsModule,n.RouterModule],declarations:[Q,Z,J,K,et,rt,Ot,ot,it,Rt,It],exports:[c.CommonModule,a.HttpClientModule,l.FormsModule,l.ReactiveFormsModule,n.RouterModule,Q,Z,J,K,et,rt,Ot,ot,it,Rt,Ot,It],providers:[Ot],entryComponents:[Q,Z]}]}],t}();t.ApiInterceptor=dt,t.ApplicationConfigurationService=U,t.AuthGuard=at,t.AutofocusDirective=J,t.CONFIG=St,t.ChangePassword=C,t.ConfigPlugin=yt,t.ConfigService=vt,t.ConfigState=$,t.CoreModule=Et,t.DynamicLayoutComponent=Z,t.ENVIRONMENT=bt,t.EllipsisDirective=K,t.ForDirective=et,t.FormSubmitDirective=rt,t.GetAppConfiguration=w,t.GetProfile=P,t.LazyLoadService=mt,t.LocalizationService=V,t.NGXS_CONFIG_PLUGIN_OPTIONS=ht,t.PatchRouteByName=O,t.PermissionDirective=ot,t.PermissionGuard=ut,t.ProfileService=k,t.ProfileState=F,t.RestOccurError=D,t.RestService=G,t.RouterOutletComponent=Q,t.SessionState=B,t.SetLanguage=L,t.SetTenant=x,t.StartLoader=j,t.StopLoader=E,t.UpdateProfile=A,t.VisibilityDirective=it,t.configFactory=function(t){return v({},t)},t.environmentFactory=function(t){return v({},t)},t.getInitialData=T,t.localeInitializer=q,t.noop=function(){return function(){}},t.organizeRoutes=M,t.registerLocale=_,t.setChildRoute=z,t.sortRoutes=H,t.takeUntilDestroy=W,t.uuid=nt,t.ɵa=F,t.ɵb=k,t.ɵba=It,t.ɵbb=wt,t.ɵbc=jt,t.ɵbd=ht,t.ɵbe=yt,t.ɵbf=dt,t.ɵbg=T,t.ɵbh=q,t.ɵc=G,t.ɵd=P,t.ɵe=A,t.ɵf=C,t.ɵh=B,t.ɵi=V,t.ɵj=L,t.ɵk=x,t.ɵm=$,t.ɵn=U,t.ɵo=O,t.ɵp=w,t.ɵq=Q,t.ɵr=Z,t.ɵs=J,t.ɵt=K,t.ɵu=et,t.ɵv=rt,t.ɵw=Ot,t.ɵx=ot,t.ɵy=it,t.ɵz=Rt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=abp-ng.core.umd.min.js.map