!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@abp/ng.core"),require("@angular/core"),require("@angular/router"),require("@angular/forms"),require("@ngxs/router-plugin"),require("@ngxs/store"),require("angular-oauth2-oidc"),require("rxjs"),require("@ngx-validate/core"),require("@abp/ng.theme.shared"),require("@ng-bootstrap/ng-bootstrap"),require("primeng/table")):"function"==typeof define&&define.amd?define("@abp/ng.account",["exports","@abp/ng.core","@angular/core","@angular/router","@angular/forms","@ngxs/router-plugin","@ngxs/store","angular-oauth2-oidc","rxjs","@ngx-validate/core","@abp/ng.theme.shared","@ng-bootstrap/ng-bootstrap","primeng/table"],e):e(((n=n||self).abp=n.abp||{},n.abp.ng=n.abp.ng||{},n.abp.ng.account={}),n.ng_core,n.ng.core,n.ng.router,n.ng.forms,n.routerPlugin,n.store,n.angularOauth2Oidc,n.rxjs,n.core$1,n.ng_theme_shared,n.ngBootstrap,n.table)}(this,function(n,e,t,o,a,r,i,s,l,c,p,u,d){"use strict";var m=function(){return(m=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}).apply(this,arguments)},b=a.Validators.maxLength,g=(a.Validators.minLength,a.Validators.required),f=function(){function n(n,t,o,a){this.fb=n,this.oauthService=t,this.store=o,this.options=a,this.oauthService.configure(this.store.selectSnapshot(e.ConfigState.getOne("environment")).oAuthConfig),this.oauthService.loadDiscoveryDocument(),this.form=this.fb.group({username:["",[g,b(255)]],password:["",[g,b(32)]],remember:[!1]})}return n.prototype.onSubmit=function(){var n=this;this.form.invalid||(this.oauthService.setStorage(this.form.value.remember?localStorage:sessionStorage),l.from(this.oauthService.fetchTokenUsingPasswordFlow(this.form.get("username").value,this.form.get("password").value)).subscribe({next:function(){var t=window.history.state.redirectUrl||n.options.redirectUrl;n.store.dispatch(new e.ConfigGetAppConfiguration).subscribe(function(){return n.store.dispatch(new r.Navigate([t||"/"]))})},error:function(){return console.error("an error occured")}}))},n.decorators=[{type:t.Component,args:[{selector:"abp-login",template:'<div class="row">\n  <div class="col col-md-4 offset-md-4">\n    <abp-tenant-box></abp-tenant-box>\n\n    <div class="abp-account-container">\n      <h2>{{ \'AbpAccount::Login\' | abpLocalization }}</h2>\n      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>\n        <div class="form-group">\n          <label for="login-input-user-name-or-email-address">{{\n            \'AbpAccount::UserNameOrEmailAddress\' | abpLocalization\n          }}</label>\n          <input\n            class="form-control"\n            type="text"\n            id="login-input-user-name-or-email-address"\n            formControlName="username"\n          />\n        </div>\n        <div class="form-group">\n          <label for="login-input-password">{{ \'AbpAccount::Password\' | abpLocalization }}</label>\n          <input class="form-control" type="password" id="login-input-password" formControlName="password" />\n        </div>\n        <div class="form-check" validationTarget validationStyle>\n          <label class="form-check-label" for="login-input-remember-me">\n            <input class="form-check-input" type="checkbox" id="login-input-remember-me" formControlName="remember" />\n            {{ \'AbpAccount::RememberMe\' | abpLocalization }}\n          </label>\n        </div>\n        <div class="mt-2">\n          <button type="button" name="Action" value="Cancel" class="btn btn-secondary">\n            {{ \'AbpAccount::Cancel\' | abpLocalization }}\n          </button>\n          <button type="submit" name="Action" value="Login" class="btn btn-primary ml-1">\n            {{ \'AbpAccount::Login\' | abpLocalization }}\n          </button>\n        </div>\n      </form>\n      <div style="padding-top: 20px">\n        <a routerLink="/account/register">{{ \'AbpAccount::Register\' | abpLocalization }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n'}]}],n.ctorParameters=function(){return[{type:a.FormBuilder},{type:s.OAuthService},{type:i.Store},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:["ACCOUNT_OPTIONS"]}]}]},n}(),h=a.Validators.maxLength,v=a.Validators.minLength,y=a.Validators.required,C=a.Validators.email,S=function(){function n(n,e,t){this.fb=n,this.oauthService=e,this.router=t,this.form=this.fb.group({username:["",[y,h(255)]],password:["",[y,h(32),v(6),c.validatePassword(["small","capital","number","special"])]],email:["",[y,C]]})}return n.prototype.onSubmit=function(){this.form.invalid},n.decorators=[{type:t.Component,args:[{selector:"abp-register",template:'<div class="row">\n  <div class="col col-md-4 offset-md-4">\n    <abp-tenant-box></abp-tenant-box>\n\n    <div class="abp-account-container">\n      <h2>Register</h2>\n      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>\n        <div class="form-group">\n          <label for="input-user-name">User name</label><span> * </span\n          ><input autofocus type="text" id="input-user-name" class="form-control" formControlName="username" />\n        </div>\n        <div class="form-group">\n          <label for="input-email-address">Email address</label><span> * </span\n          ><input type="email" id="input-email-address" class="form-control" formControlName="email" />\n        </div>\n        <div class="form-group">\n          <label for="input-password">Password</label><span> * </span\n          ><input type="password" id="input-password" class="form-control" formControlName="password" />\n        </div>\n        <button type="submit" class="btn btn-primary">Register</button>\n      </form>\n    </div>\n  </div>\n</div>\n'}]}],n.ctorParameters=function(){return[{type:a.FormBuilder},{type:s.OAuthService},{type:o.Router}]},n}(),A=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:e.DynamicLayoutComponent,children:[{path:"login",component:f},{path:"register",component:S}]}],w=function(){function n(){}return n.decorators=[{type:t.NgModule,args:[{imports:[o.RouterModule.forChild(A)],exports:[o.RouterModule]}]}],n}(),x=function(){function n(n,e){this.modalService=n,this.fb=e}return n.prototype.createForm=function(){this.form=this.fb.group({name:[this.selected.name]})},n.prototype.openModal=function(){this.createForm(),this.modalService.open(this.modalContent)},n.prototype.onSwitch=function(){this.selected={},this.openModal()},n.prototype.save=function(){this.selected=this.form.value,this.modalService.dismissAll()},n.decorators=[{type:t.Component,args:[{selector:"abp-tenant-box",template:'<div\n  class="tenant-switch-box"\n  style="background-color: #eee; margin-bottom: 20px; color: #000; padding: 10px; text-align: center;"\n>\n  <span style="color: #666;">{{ \'AbpUiMultiTenancy::Tenant\' | abpLocalization }}: </span>\n  <strong>\n    <i>{{ selected?.name ? selected.name : (\'AbpUiMultiTenancy::NotSelected\' | abpLocalization) }}</i>\n  </strong>\n  (<a id="abp-tenant-switch-link" style="color: #333; cursor: pointer" (click)="onSwitch()">{{\n    \'AbpUiMultiTenancy::Switch\' | abpLocalization\n  }}</a\n  >)\n</div>\n\n<ng-template #modalContent let-modal>\n  <div class="modal-header">\n    <h5 class="modal-title" id="modal-basic-title">\n      SwitchTenant\n    </h5>\n    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  </div>\n  <form [formGroup]="form" (ngSubmit)="save()">\n    <div class="modal-body">\n      <div class="mt-2">\n        <div class="form-group">\n          <label for="name">{{ \'AbpUiMultiTenancy::Name\' | abpLocalization }}</label>\n          <input type="text" id="name" class="form-control" formControlName="name" />\n        </div>\n        <p>{{ \'AbpUiMultiTenancy::SwitchTenantHint\' | abpLocalization }}</p>\n      </div>\n    </div>\n\n    <div class="modal-footer">\n      <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="modal.close()">\n        {{ \'AbpTenantManagement::Cancel\' | abpLocalization }}\n      </button>\n      <button type="submit" class="btn btn-primary">\n        <i class="fa fa-check mr-1"></i> <span>{{ \'AbpTenantManagement::Save\' | abpLocalization }}</span>\n      </button>\n    </div>\n  </form>\n</ng-template>\n'}]}],n.ctorParameters=function(){return[{type:u.NgbModal},{type:a.FormBuilder}]},n.propDecorators={modalContent:[{type:t.ViewChild,args:["modalContent",{static:!1}]}]},n}();function T(n){return m({redirectUrl:"/"},n)}var L=new t.InjectionToken("ACCOUNT_OPTIONS"),N=function(){function n(){}return n.forRoot=function(e){return void 0===e&&(e={}),{ngModule:n,providers:[{provide:L,useValue:e},{provide:"ACCOUNT_OPTIONS",useFactory:T,deps:[L]}]}},n.decorators=[{type:t.NgModule,args:[{declarations:[f,S,x],imports:[e.CoreModule,w,p.ThemeSharedModule,d.TableModule,u.NgbDropdownModule,c.NgxValidateCoreModule],exports:[]}]}],n}();n.ACCOUNT_OPTIONS=L,n.ACCOUNT_ROUTES=[{name:"Account",path:"account",invisible:!0,layout:"application",children:[{path:"login",name:"Login",order:1},{path:"register",name:"Register",order:2}]}],n.AccountModule=N,n.LoginComponent=f,n.RegisterComponent=S,n.optionsFactory=T,n.ɵa=f,n.ɵc=S,n.ɵd=x,n.ɵe=w,n.ɵf=T,n.ɵg=L,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=abp-ng.account.umd.min.js.map